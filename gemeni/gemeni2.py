import json
import re
from flask import Flask, request, jsonify
import requests

app = Flask(__name__)

GEMINI_ENDPOINT = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyBtFUS6aAbg0yrP26EUUpq3e-LOEnE8nbc"


def fix_and_parse_json(response_data):
    """
    ุงู ุชุงุจุน ูุฑูุฏ ฺฉู ููฺฉู ุงุณุช ุดุงูู ุชูุถุญุงุช ุงุถุงู ู ุจููฺฉโูุง markdown ุจุงุดุฏ ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู ู ุจููฺฉ JSON ุฑุง ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ.
    ุงฺฏุฑ ูุฑูุฏ ุงุฒ ูุจู ุฏฺฉุดูุฑ ุจุงุดุฏุ ูุณุชููุงู ุจุฑูโฺฏุฑุฏุงูุฏ.
    """
    if isinstance(response_data, dict):
        return response_data

    # ุชูุงุด ุจุฑุง ุงุณุชุฎุฑุงุฌ ุจููฺฉ JSON ุจู ```json ู ```
    pattern = re.compile(r"```json(.*?)```", re.DOTALL)
    match = pattern.search(response_data)
    if match:
        json_text = match.group(1).strip()
    else:
        # ุงฺฏุฑ ุจููฺฉ json ุงูุช ูุดุฏุ ุณุน ูโฺฉูู ุจููฺฉ ุจู ``` ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูู
        pattern2 = re.compile(r"```(.*?)```", re.DOTALL)
        match2 = pattern2.search(response_data)
        if match2:
            json_text = match2.group(1).strip()
        else:
            # ุฏุฑ ููุงุชุ ฺฉู ูุชู ูพุงฺฉุณุงุฒ ุดุฏู ุฑุง ุฏุฑ ูุธุฑ ูโฺฏุฑู
            json_text = response_data.strip()

    # ุญุฐู ฺฉุงูุงูุง ุงุถุงู ูุจู ุงุฒ } ุง ]
    json_text = re.sub(r',\s*([\}\]])', r'\1', json_text)

    if not json_text:
        raise ValueError("ูุชู ูพุงฺฉุณุงุฒ ุดุฏู ุฎุงู ุงุณุช.")

    try:
        return json.loads(json_text)
    except json.JSONDecodeError as e:
        raise ValueError(f"ุฎุทุง ุฏุฑ ุชุจุฏู ุฑุดุชู ุจู JSON: {e}")


@app.route('/generate', methods=['POST'])
def handle_request():
    # ุฏุฑุงูุช ูุชู ุงุฒ ฺฉุงุฑุจุฑ
    user_text = request.json.get('text')

    if not user_text:
        return jsonify({'error': 'ูุชู ูุฑูุฏ ุงูุช ูุดุฏ'}), 400


#     PR = f"""
#     ูุชู ุฒุฑ ุฑู ุจู ุตูุฑุช ฺฉ ูพุฑุงูุช ููููู ุงูฺฏูุณ ุจุงุฒููุณ ู ุชุง ุฌุง ููฺฉู ุงู ู ูพุฑ ุจุฏู ู ููุงุช ุฌุฒูุงุช ุจุฑุง ุฒุจุง ุงุฒ ุฎูุฏุช ุงุถุงู ฺฉู ุจุฑุง ุทุฑุงุญ ฺฉ ุชุตูุฑ  ู ุงุฒ ุชูุงู ุชฺฉูฺฉ ูุง ุทุฑุงุญ ู ููุชู ูููุชุงฺ ุจุฑุง ุชูุตู ูุถุง ุงุณุชูุงุฏู ฺฉู:
# ูุชู ูพุฑุงูุช :
# ูฺฉุชู : ุจู ุชูุตู ุงุดุง ู ููุฌูุฏุงุช ุฏูุช ฺฉู ุชุง ูุซูุง ฺฉ ฺฏุฑุจู ุชู ุชุตูุฑ ุฎุฑูุฌ 5 ุฏุณุช ูุฏุงุดุชู ุจุงุดู ุ ุจุงุฏ ุฌูุฑ ุชูุตู ฺฉู ฺฉู ููุฌูุฏุงุช ู ุงุดุง ุฏุฑ ุชุตูุฑ ุนุงุฑ ุงุฒ ุฎุทุง ุจุงุดู
# ูฺฉุชู : ุงฺฏุฑ ุณูฺู ูพุฑุงูุช ููุฌูุฏ ุง ุด ูุณุช ุจุงุฏ ฺฉุงูู ุชูุตู ฺฉู ฺฉู ููุท 1 ุฏููู ุงุฒ ุณูฺู ุชููุฏ ุดู ู ูุซูุง 2 ฺฏุฑุจู ุงููู ุชููู ุงุฌุงุฏ ูฺฉูู
# [{user_input}]
# ุญุงูุง ูุชู ูพุฑุงูุช ฺฉู ุจุงุฒููุณ ฺฉุฑุฏ ุฏุฑ ุฌุณูู ุฒุฑ ุฌุงฺฏุฐุงุฑ ฺฉู ู ุจุง ุชูุฌู ุจู ูุถุง ฺฉู ุชูุตู ฺฉุฑุฏ ุณุงุฒ ู ุงุจุนุงุฏ ุฑู ุจุง ุญุฏุงฺฉุซุฑ ุฑุฒูููุดู 2048 ุชูุธู ฺฉู ุ ุงฺฏู ุชู ูพุฑุงูุช ูุณุจุช ูุฑุจุน ู ุง ูุณุทุชู ฺฏูุงู ุดุฏู ุจูุฏ ุจู ูููู ูุณุจุช ุงุจุนุงุฏ ุฑู ุจฺฏู
# ุงุจุนุงุฏ ุงุณุชุงูุฏุงุฑุฏ 1080 ู 1920 ู 2048 ุงุณุชูุงุฏู ฺฉู ููุท
# ุณุงุฎุชุงุฑ ุฌุณูู ฺฉู ุจุงุฏ ุจู ูู ุจุฏ :
# {jso}
#  ุชูุฌู : ููุท ู ููุท ู ููุท ุฏููุง ูุซู ุฌุณูู ุจุงูุง ุฑู ุฏุฑ ููุงุช ุจูู ุจุฏู ู ูุงุฒ ุจู ูฺ ุชูุถุญ ูุฏุงุฑู ู ุฏูุช ฺฉู ุณุงุฎุชุงุฑ ุฌุณูู ุจุง ูุงุตูู ุฎุฑุงุจ ูฺฉู ุฏููุง ุฌุณูู ุฎุฑูุฌ ุฑู ุจุง ูุฑูุช ุฌุณูู ุตุญุญ ูุงุฒ ุฏุงุฑู ู ุงุจุนุงุฏ ูู ูุถุฑุจ ุงุฒ 16 ุจุงุดู ููุท
#  ุงุฒ ุงุจุนุงุฏ ฺฉุงููุง ุงุณุชุงูุฏุงุฑุฏ ุงุณุชูุงุฏู ฺฉู
#  ูฺฉุชู : ุชู ูุชู ูพุฑุงูุช ุชู ุฌุณูู ุงุตูุง ูุฑู ุฎุท ุจุนุฏ ู ูุชู ฺฉูพุงุฑฺู ู ุจุฏูู ูฺ ูุงุตูู ุง ุจุงุดู
#  ููู ุชุฑู ูฺฉุชู ฺฉู ฺฉุงูู ุจุงุฏ ุฏูุช ฺฉู:
#  ุจู ูฺ ุนููุงู ุชู ูุชู ูพุฑุงูุชุช ูุจุงุฏ ูุงุตูู ุฑูุชู ุจู ุฎุท ุจุนุฏ ุจุงุดู ฺูู ุณุงุฎุชุงุฑ ุฌุณูู ุฎุฑุงุจ ูุดู
#  ูฺฉุชู ุขุฎุฑ : ุฌุณูู ุฑู ุจู ุตูุฑุช ูุชู ุฎุงู ุจุฏู ู ูุงุฒ ุจู ูุฑุณุชุงุฏู ุฏุฑ ูุงูุจ ุฌุณูู ูุณุช
#  ุนู ุจู ูฺ ุนููุง ูุจุงุฏ [```json] ุงูุฌูุฑ ุจูุฑุณุช
#     """
#
    base_json = """
{
    "prompt": "",
    "accurate": false,
    "remove": false,
    "negative_prompt": "",
    "width": 1024,
    "height": 1024,
    "steps": 20,
    "guidance": 12,
    "seed": 52
}
"""
    base_json2 = """
          {
    "prompts": [],
    "Prohibition" : false,
    "Advertising" : false,
    "caption": ""
}
            """

    PR = f"""
                                   ูุชู ุฒุฑ ุฑู ุจู ุตูุฑุช ฺฉ ูพุฑุงูุช ููููู ุงูฺฏูุณ ุจู ุฌูุช ุชููุฏ ฺฉ ุนฺฉุณ ุจุงุฒููุณ ู ูฺ ุชุบุฑ ุชู ูููููุด ูุฏู:
                                   ูุชู ูพุฑุงูุช ุดูุงุฑู 1:
                                   [{user_text}]
                                   ูุณุช ููููุนุช ูุง:
                                       [
                                       ุชุตุงูุฑ ุจุฑููฺฏ
ูพูุฑููฺฏุฑุงู
ุดุฎุตุช ูุง ุณุงุณ ู ุฑูุญุงู ุงุฑุงู
ุดุฎุตุช ุขูุง ุฎุงููู ุง
ุดุฎุตุช ุขูุง ุฎูู
ุดุฎุตุช ูุง ุจุงุฒฺฏุฑ ุงุฑุงู
ูุจุงุณ ุจ ุฑูฺฏ
ูุจุงุณ ุดูุงู
ููุทู ุจุฏูู ูุจุงุณ ุจูุฏู
ููููุนุช ูุฑููุน ููุฌูุณ ฺฏุฑุง ุง ุชุฑูุณ
ููููุนุช ูุฑููุน ููุถูุน ุณฺฉุณ ุง ุฌูุณ ุจู ูุฑ ูุญู
ููููุนุช ูุฑููุน ุตุญูู ูุจ ู ูุนุงุดูู ุจู ุฏู ุง ฺูุฏ ููุฑ
ุชุตุงูุฑ ุจุฑููฺฏ ุฏุฑ ูุฑ ุดฺฉู ู ุณุทุญ (ฺฉุงููุ ูููโุจุฑูููุ ุง ูุจุงุณโูุง ุชุญุฑฺฉโุขูุฒ).
    ููู: ูุชู ูพุฑุงูุช ุดูุงุฑู 1 ุจู ูฺ ุนููุงู ูุงุฏ ุฏุงุฑุง ุนูุงูู ูุซู ูุจุงุณ ุดูุงู ู ุง ููุทู ุจุฏูู ูุจุงุณ ุจูุฏู ุจุงุดู ู ุฌุฒู ููููุนุช ูุง ุญุณุงุจ ูุดู
ุญุช ุนููุงู ฺฉุฑุฏู ุดูุฑุช ุจุฑุง ุฌูุณ ูููุซ ฺฉุงููุง ููููุนู ูุซูุง ุจฺฏู ู ุฏุฎุชุฑ ุจุง ุดูุฑุช ุง ุจุง ุณูุชู ุง ุจ ูุจุงุณ ุง ุฎุท ุณูู ูุงุด ูพุฏุง ุจุงุดู
ุจุงุฏ ฺฉุงููุง ูุฑููุน ุจุฑููฺฏ ุชุดุฎุต ุจุฏ
ููููุนุช ุฏุฑ ูพูุดุด ูุง ุจุง ุดูุฑุช ู ุณูุชู ู ุง ูุจุงุณ ุฒุฑ
ูพูุฑููฺฏุฑุงูุ ููุงุด ูุนุงูุชโูุง ุฌูุณุ ุงุดุงุฑุงุช ุฌูุณุ ุง ูุฑฺฏููู ูุญุชูุง ูุฑุชุจุท ุจุง ุขู.
ุงูุฏุงูโูุง ุฎุตูุต ุจุฏู ุงูุณุงู ฺู ูุณุชููุงู ูุงู ุจุฑุฏู ุดููุฏ ุง ุจูโุทูุฑ ุบุฑูุณุชูู ุชูุตู ุดููุฏ
ุงุดุงุฑุงุช ุฌูุณ ุญุช ุจูโุตูุฑุช ุถููุ ุงุฒ ุฌููู ุจูุณูโูุง ุดููุงูุ ููุณโูุง ุตููุ ุง ุญุงูุงุช ุนุงุดูุงูู ุจุด ุงุฒ ุญุฏ
ุนุฏู ุงุณุชูุงุฏู ุงุฒ ฺฉููุงุช ูุงูพุณูุฏุ ุชูููโุขูุฒุ ุง ุงููุงุธ ุฑฺฉฺฉ.
ููููุนุช ุงุณุชูุงุฏู ุงุฒ ูุฑฺฏููู ุฒุจุงู ุชุญูุฑุขูุฒ ุง ุชููู ุจู ุงูุฑุงุฏุ ูููุชโูุงุ ูุฐุงูุจ ุง ฺฏุฑููโูุง ุงุฌุชูุงุน.
ููููุนุช ุงุณุชูุงุฏู ุงุฒ ุงููุงุธ ุฏููพููู ุง ฺฉููุงุช ฺฉู ุจูโุทูุฑ ุถูู ุจู ูุณุงุฆู ุฌูุณุ ุฎุดููุชโุขูุฒุ ุง ุบุฑุงุฎูุงู ุงุดุงุฑู ุฏุงุฑูุฏ.
 ฺฉููุงุช ฺฉู ุจู ุตูุฑุช ููุดุชู ุดุฏู ุจุฑุง ุฏูุฑ ุฒุฏู ููููุนุช ูุง ูุงููุฏ ุนฺฉุณ ููุฎุช ฺฉู ููุธูุฑ ููุงู ูุฎุช ู ุจุฑููฺฏ ูุณุช ู ุจุงุฏ ููุงุฑุฏ ุงู ฺูู ุชุดุฎุต ุฏู
ุงุณุชูุงุฏู ุงุฒ ฺฉููุงุช ูุง ููุงุณุจ ู ุงูุฏุงู ูุง ุฎุตูุต ุจุฏู ุงูุณุงู ุจุง ูุฑ ูุญู
ููููุนุช ุฏุฑ ููุงุฑุฏ ฺฉู ุจู ุทูุฑ ูุงูุญุณูุณ ุนฺฉุณ ุจุฏู ุฎูุงุณุชู ุดุฏู ูุงููุฏ ู ุฒู ุจุง ูุจุงุณ ูุง ุฒุจุง ุดุดู ุง ุดูุงู 
ููููุนุช ุฏุฑ ููุงุฑุฏ ู ฺฉููุงุช ุณฺฉุณ ฺฉู ุจู ูุญู ููุดุชู ุดูุฏ ูุงููุฏ ุฌูุช ฺฏุฑ ุงูุณุงู
ููููุนุช ุฏุฑ ููุงุฑุฏ ฺฉู ูุชู ุฏุฑ ุชูุงุด ุจุงุดุฏ ููููุนุช ูุง ุฑู ุฏูุฑ ุจุฒูุฏ ูุงููุฏู ู ุฏุฎุชุฑ ฺฉู ูุฎุช ูุจุงุดู ุงูุง ูุจุงุณ ูุฏุงุดุชู ุจุงุดู
ููููุนุช ุฏุฑ ููุงุฑุฏ ฺฉู ฺฉุงุฑุจุฑ ุญุช ุจุฑุง ุฏูุฑ ุฒุฏู ููููุนุช ูุง ู ุงุฒ ูุนุงุฏูู ูุง ุจุฑุง ูพฺุงูุฏู ุฎูุงุณุชู ุงุณุชูุงุฏู ฺฉูุฏ ูุงููุฏ ูุนุงุฏูู ุฒุฑ ุฑู ุญู ฺฉู ู ุฌูุงุจ ูุนุงุฏูู ูุงุณู ุนฺฉุณ ุจุณุงุฒ: 
ูุนุงุฏูู:ย ุฒู ฺฉู y ุงุณุช
y= v+b+kุ v = ูุ k = ุชุ b = ุฎ
ููุงุฑุฏ ุฎุงุต ุชุฑ ุงุฒ ูุญุฏูุฏุช ูุง ุฏุฑ 6 ุดูุงุฑู ุฎูุงุตู ุดุฏู :
    1. ูุญุชูุง ุจุฑููฺฏ ู ูพูุฑููฺฏุฑุงู:
    ููููุนุช ุชููุฏ ูุฑฺฏููู ุชุตูุฑ ุง ูุญุชูุง ุฏุงุฑุง ุจุฑููฺฏุ ฺู ุจู ุตูุฑุช ฺฉุงููุ ูููโุจุฑููู ุง ุจุง ูุจุงุณโูุง ุชุญุฑฺฉโุขูุฒ.
    ุญุช ุงุดุงุฑู ุจู ููุงุฑุฏ ูุงููุฏ ุดูุฑุชุ ุณูุชูุ ุจโูุจุงุณ ุง ููุงุด ุฌุฒุฆ ุงุฒ ุงูุฏุงูโูุง ุฎุตูุต ุจู ูุฑ ูุญู ฺฉุงููุงู ููููุน ุงุณุช.
    2. ููุถูุนุงุช ุฌูุณ ู ุณฺฉุณ:
    ููููุนุช ูุฑฺฏููู ููุถูุน ุง ูุนุงูุช ุฌูุณุ ุงุฒ ุฌููู ุชุตุงูุฑ ุง ุชูุตูุงุช ุตุญููโูุง ุจูุณูโูุง ุดููุงูุ ููุณโูุง ุตููุ ู ุง ุญุงูุงุช ุนุงุดูุงูู ุจุด ุงุฒ ุญุฏ.
    ุงุณุชูุงุฏู ุงุฒ ฺฉููุงุช ุง ุนุจุงุฑุงุช ุฏููพููู ู ุงุตุทูุงุญุงุช ฺฉู ุจู ุทูุฑ ุถูู ุจู ูุณุงุฆู ุฌูุณุ ุฎุดููุชโุขูุฒ ุง ุบุฑุงุฎูุงู ุงุดุงุฑู ุฏุงุฑูุฏ.
    3. ุงุณุชูุงุฏู ุงุฒ ูุงฺูโูุง ู ุนุจุงุฑุงุช ุญุณุงุณ:
    ููููุนุช ุงุณุชูุงุฏู ุงุฒ ฺฉููุงุช ูุงูพุณูุฏุ ุชูููโุขูุฒ ุง ุงููุงุธ ุฑฺฉฺฉ ุฏุฑ ุชูุตู ุงูุฏุงูโูุง ุฎุตูุต ุจุฏู ุงูุณุงู ุง ูุถุนุชโูุง ุฌูุณ.
    ุชูุงุด ุจุฑุง ุฏูุฑ ุฒุฏู ููููุนุชโูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุตุทูุงุญุงุช ูุจูู ุง ูุนุงุฏูุงุช ุฑุงุถ (ูุซูุงู ูุนุงุฏูุงุช ฺฉู ุฏุฑ ุขู ุนูุงุตุฑ ุจู ุตูุฑุช ฺฉุฏฺฏุฐุงุฑ ุดุฏู ุจุงู ุดุฏูโุงูุฏ).
    4. ููุถูุนุงุช ูุฑุชุจุท ุจุง ุดุฎุตุชโูุง ู ฺฏุฑููโูุง ุญุณุงุณ:
    ููููุนุช ุชููุฏ ุง ุงูุชุดุงุฑ ุชุตุงูุฑุ ูุญุชูุง ุชูุตู ุง ูุฑฺฏููู ุงุดุงุฑู ุจู ุดุฎุตุชโูุง ุณุงุณุ ุฑูุญุงู ุง ููุฑ ุงุฑุงู ุจู ูฺู ุดุฎุตุชโูุง ููู ูุงููุฏ ุขูุง ุฎุงููู ุง ุขูุง ุฎูู.
    ููฺูู ููููุนุช ูุฑฺฏููู ูุญุชูุง ูุฑุจูุท ุจู ููุฌูุณโฺฏุฑุง ุง ุชุฑูุณ.
    5. ูุญุชูุง ูพูุดุด ู ูุจุงุณ:
    ุฏุฑ ูุฑฺฏููู ุชููุฏ ุชุตูุฑ ุฒูุงููุ ุงูุฒุงูุงู ุจุงุฏ ูพูุดุด ฺฉุงูู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ.
    ุฏุฑ ุชุตุงูุฑุ ุฒู ูุจุงุฏ ุจู ฺฏูููโุง ููุงุด ุฏุงุฏู ุดูุฏ ฺฉู ูพูุดุด ูุฏุงุดุชู ุง ุดูุงู ุจูุฏู ูุจุงุณโูุง ุจู ูุญู ุชุนุจุฑ ุดูุฏ ฺฉู ุจุงุนุซ ุจุฑุฏุงุดุช ุจุฑููฺฏ ุง ูุดุงู ุฏุงุฏู ุงูุฏุงูโูุง ุฎุตูุต ุดูุฏ.
    ุจู ุทูุฑ ูฺูุ ุฏุฑ ุตูุฑุช ฺฉู ุชุตูุฑ ุงุฒ ุฒู ุชููุฏ ูโุดูุฏุ ูุงุฒู ุงุณุช ุชูุงู ุจุฑุฌุณุชฺฏโูุงุ ุฎุทูุท ุฒูุช (ูุงููุฏ ุฎุท ุณูู) ู ูุฑฺฏููู ุฌุฒุฆุงุช ุญุณุงุณ ุจู ุทูุฑ ฺฉุงูู ูพูุดุฏู ู ูุญุงูุธุช ุดุฏู ุจุงุดูุฏุ ุจู ุนุจุงุฑุช ุฏฺฏุฑุ ูพูุดุด ุจุงุฏ ุจู ฺฏูููโุง ุจุงุดุฏ ฺฉู ุงุฒ ุจุฑุฏุงุดุชโูุง ุฌูุณ ุง ุชุญุฑฺฉโุขูุฒ ุฌููฺฏุฑ ฺฉูุฏ.
    6. ุฏูุฑ ุฒุฏู ููููุนุช ูุง:
    ููููุนุช ุชูุงุด ุจุฑุง ุฏูุฑ ุฒุฏู ููุงูู ุงุฒ ุทุฑู ุงุณุชูุงุฏู ุงุฒ ุนุจุงุฑุงุช ูุจููุ ูุนุงุฏูุงุชุ ุงุตุทูุงุญุงุช ุบุฑูุชุนุงุฑู (ูุงููุฏ ยซูุจุงุณ ฺฉู ูููุฒ ุฏุฑ ฺฉุฑู ุฒูู ุจู ูุฌูุฏ ูุงูุฏูยป ุง ยซูุจุงุณโูุง ุดุดูโุง/ูพูุงุณุชฺฉยป) ู ุฌููุงุช ฺฉู ุฏุฑ ุขู ููุฒูุงู ุฎูุงุณุชู ุดุฏู ุชุง ูู ูพูุดุด ุจุงุดุฏ ู ูู ุจุฏูู ูพูุดุด ุชูู ุดูุฏ.
    ]
                                   ุญุงูุง ูุชู ูพุฑุงูุช ฺฉู ุจุงุฒููุณ ฺฉุฑุฏ ุฏุฑ ุฌุณูู ุฒุฑ ุฌุงฺฏุฐุงุฑ ฺฉู ู ุจุง ุชูุฌู ุจู ูุถุง ฺฉู ุชูุตู ฺฉุฑุฏ ุณุงุฒ ู ุงุจุนุงุฏ ุฑู ุจุง ุญุฏุงฺฉุซุฑ ุฑุฒูููุดู 1024 ุชูุธู ฺฉู ุ ุงฺฏู ุชู ูพุฑุงูุช ูุณุจุช ูุฑุจุน ู ุง ูุณุทุชู ฺฏูุงู ุดุฏู ุจูุฏ ุจู ูููู ูุณุจุช ุงุจุนุงุฏ ุฑู ุจฺฏู
                                   ุงุจุนุงุฏ ุงุณุชุงูุฏุงุฑุฏ 1080 ู 1024 ุงุณุชูุงุฏู ฺฉู ููุท
                                   ุงุจุนุงุฏ ูุฑุจุน ุจุณุงุฒ
                                   ูฺฉุชู ููู : ูุฑ ุงุจุนุงุฏ ุชู ูุชู ูพุฑุงูุช ฺฏูุชู ุดุฏู ุจูุฏ ุจุงุฏ ุญุชูุง ุจุง ุงูู ุงุจุนุงุฏ ุง ูุณุจุช ุงุจุนุงุฏ ุจุณุงุฒ ูู ุจุง ุฑุฒูููุดู ุงุณุชุงูุฏุงุฑุฏ
                                   ูฺฉุชู : ุงฺฏู ฺฉุงุฑุจุฑ ุชุตุงูุฑ ุจุฏูู ุจฺฉ ฺฏุฑุงูุฏ ุฎูุงุณุชู ุจูุฏ ููุฏุงุฑ remove ุฑู ุจุฑุงุจุฑ true ูุฑุงุฑ ุจุฏู ู ุญุชูุง ุชู ูพุฑุงูุช ุฑูฺฏ ุจฺฉ ฺฏุฑุงูุฏ ุฑู ุฑูฺฏ ุจฺฏู ฺฉู ุฏุงุฎู ูพุฑุงูุช ูุจุงุดู ุชุง ุญุฐู ุจฺฉ ฺฏุฑุงูุฏ ุฑุงุญุช ุงูุฌุงู ุดู 
                                   ูฺฉุชู : ุชุง ฺฉุงุฑุจุฑ ุดูุงู ุฏุฑุฎูุงุณุช ูฺฉุฑุฏู ุ ูุงุฒ ุจู ุญุฐู ุจฺฉ ฺฏุฑุงูุฏ ูุณุช
                                   ูฺฉุชู : ูพุฑุงูุช ุฑู ูุชูู ุจู ุดุฑุท ุนูุถ ูุดุฏู ุฎูุงุณุชู ู ููููู ฺฏุณุชุฑุด ุจุฏ ู ูพุฑุงููู ูพุฑุงูุช ุดุฑุงุท ุฑู ฺฉุงูู ุชูุถุญ ุจุฏ
                               ุฎู ุฎู ููู : ุชุง ฺฉุงุฑุจุฑ ุชู ูพุฑุงูุช ุงุดุงุฑู ุง ุจู ุญุฐู ุจฺฉ ฺฏุฑุงูุฏ ูฺฉุฑุฏู ุจุงุดู ุญู ุชุบุฑ ููุฏุงุฑ remove ุฑู ูุฏุงุฑ
                                   ุจุงุฏ ุฎูุงุณุชู ฺฉุงุฑุจุฑ ุงุฒ ุงู ูพุฑุงูุช ุฏุฑฺฉ ฺฉู ู ูพุณ ุงุฒ ุฏุฑฺฉ ุฎูุงุณุชู ฺฉุงุฑุจุฑ ุ ูพุฑุงูุช ุฑู ูพุฑุงููู ุฎูุงุณุชู ฺฉุงุฑุจุฑ ฺฏุณุชุฑุด ุจุฏ
                                   ูโุชูู ุชุง ุฌุง ููฺฉู ุจู ูุณุจุช ูพุฑุงูุช ุดุฑุงุท ูุญุท ุชุตูุฑ ุฎูุงุณุชู ุดุฏู ุชูุตู ฺฉู ู ุฎูุฏุช ุฑู ุฏุฑ ุดุฑุงุท ูพุฑุงูุช ุจุฒุงุฑ ู ฺฉุงูู ุชูุตู ฺฉู ุจุง ุชูุงู ุชฺฉูฺฉ ูุง ุทุฑุงุญ
                                   ูุชูู ูพุฑุงูุช ุฑู ุฒุจุง ุณุงุฒ ฺฉู ู ุงุฒ ุงููุงุน ุดุฑุงุท ุจุฑุง ุฒุจุงุชุฑ ุดุฏู ุจูุฑู ุจฺฏุฑ
                                   ูุชูู ูุชูุงุณุจ ุจุง ููุถูุน ูพุฑุงูุช ูุถุง ุณุงุฒ ุญุฑูู ุง ุงูุฌุงู ุจุฏ
                                   ูุชูู ูุชูุงุณุจ ุจุง ููุถูุน ูพุฑุงูุช ุจุงูุช ุชูุตู ฺฉู ู ุจู ุชูุตู ุฌุฒุฆุงุช ุจุณุงุฑ ุฏูุช ฺฉู
                                   ูุชูู ุญุงูุช ูฺฏุงู ุณูฺู ู ฺฉุงุฑุงฺฉุชุฑ ูุง ู ุฒุงูู ุฏูุฑุจู ุฑู ุชู ุจูุชุฑู ุญุงูุช ุชูุตู ฺฉู
                                   ูุชูู ูพุฑุงูุช ุจุฑุง ูพุฑุงูุช ุดุฑุงุท ููุฑ ูพุฑุฏุงุฒ ุญุฑูู ุง ุชูุตู ฺฉู
                                   ูุชูู ุจุฑุง ูพุฑุงูุชู ฺุณุช ูุง ู ุญุงูุงุช ุจุฑุง ุงููุง ุญุณ ูุงูุน ูพุฑุงูุช ุชูุตู ฺฉู
                                   ูุชูู ุงุฒ ุฒุงูู ูุง ูุชูุงูุช ุจู ูพุฑุงูุช ูฺฏุงู ฺฉู
                                   ูุชูู ููฺฉูุณ ูพุฑุงูุช ุฑู ุฑู ุณูฺู ุงุตู ุจุฒุงุฑ
                                   ูุชูู ุจูุชุฑู ุฑูฺฏ ุจูุฏ ุจุฑุง ุงุฌุฒุง ูพุฑุงูุช ุงูุชุฎุงุจ ฺฉู
                                   ูุชูู ุงุฒ ุฑูฺฏ ูุง ูฺฉูู ุญุฑูู ุง ุงุณุชูุงุฏู ฺฉู
                                   ูุชูู ุจูุชุฑู ูฺฉุงู ูุงุฑู ุจุฑุง ูพุฑุงูุช ุจุงุฒฺฏู ฺฉู
                                   ูุชูู ุณุจฺฉ ุชููุฏ ุนฺฉุณ ุฑู ูุชูุงุณุจ ุจุง ุงูุชุฑู ุฎุฑูุฌ ุงูุชุฎุงุจ ฺฉู ุงุฒ ุฎูุฏุช
                                   ุชุฑุฌุญุง ุณุจฺฉ ุฎุฑูุฌ ููุงุด ู ุงูุซุงูุด ูุจุงุดู 
                                   ููู:
                                [ูุฌ ูพุฑุงูุช ุจุง ุณุจฺฉ ฺฉูุฏฺฉุงูู ู ุง 2 ุจุนุฏ ฺฉูุฏฺฉุงูู ู ฺฉุงุฑุชูู ู ุง ฺูุฏ ุฑูฺฏ ุซุงุจุช ุงุฌุงุฏ ูฺฉู]
                                ูฺฉุชู:  ุงฺฏู ุฎูุงุณุช ุนฺฉุณ ุฒู ุจุณุงุฒุ ุจู ูฺ ุนููุงู ูุจุงุฏ ุฎุท ุณูู ูุดุฎุต ุจุงุดู ู ูุจุงุณ ุจุงุฏ ุจุงูุง ุชุฑ ุงุฒ ุณูู ุฒู ุจุงุดู ุญุชูุง
                                   ุชุฑุฌุญุง ุณุจฺฉ ูุง ูุงูุน ู ุงููุดู ู 3 ุจุนุฏ ู ุจู ุงู ูุง ุฑู ุงูุชุฎุงุจ ฺฉู
                                   ูุชูู ุชู ูพุฑุงูุช ููุณุช ุงุฒ ุฒุจุงู ุจุฏู ุจูุฑู ุจฺฏุฑ ู ุจุฑุง ฺฉุงุฑุงฺฉุชุฑ ูุง ุฒุจุงู ุจุฏู ุฑู ฺฉุงูู ุชูุตู ฺฉู
                                   ูุชูู ุญุงู ู ููุง ูพุฑุงูุช ูุชูุงุณุจ ุจุง ุจูุชุฑู ุฎุฑูุฌ ฺฉุงูู ุชูุตู ฺฉู
                                   ูุชูู ุจุฑุง ุจูุชุฑู ุฎุฑูุฌ ุงุฒ ฺฉุงุฑ ุจู ูพุฑุงูุช ุฌูุช ุจุฏ ู ุฑูุดู ุณุงุฒ ฺฉู
                                   ูุชูู ุจู ุญุงูุช ูู ู ููุน ูพูุดุด ุฏูุช ฺฉู ู ููู ุชูุงุดุช ุจุฑุง ุชูุตู ุฑุฒ ุชุฑู ุฌุฒุฆุงุช ุจูุฑู ุจฺฏุฑ
                                   ููุดู ุณุน ฺฉู 1 ุณูฺู ุฏุงุดุชู ุจุงุด ุชู ูพุฑุงูุช ู ุชูุฑฺฉุฒ ุงุตู ุฑู ุณูฺู ุงุตู ููุท ุจุงุดู
                                   ูุชูู ูุชูุงุณุจ ุจุง ุดุฑุงุท ุจู ุชูุตู ุงููุงู ูุง ุจูพุฑุฏุงุฒ ุชุง ุฎุฑูุฌ ฺุดู ููุงุฒ ุชุฑ ุจุดู
                                   ููู : ุงุฒ ฺฉููุงุช ูพุฑ ูุนูุง ู ุฏุงุฑุง ูุนูุง ุฏูู ุงูฺฏูุณ ุจุฑุง ุชูุตู ุงุณุชูุงุฏู ฺฉู
                                   ุงุฒ ุญุงูุช ุชูุซู ู ูุซุงู ุฒุฏู ุจุฑุง ุงูุชูุงู ุจูุชุฑ ููููู ูพุฑุงูุช ุจูุฑู ุจฺฏุฑ
                                   ูฺฉุงูุช ฺฉู ุจุฑุง ุชููุฏ ฺฉ ูพุฑุงูุช ุฎูุจ ุจุงุฏ ุฏุฑ ูุธุฑ ุจฺฏุฑ:[
                     ๐น ุงูุฒุงุด ุนูู ูู ุจุง ุงุตุทูุงุญุงุช ุณููุง/ุนฺฉุงุณ:
                    โ ููุฑูพุฑุฏุงุฒ ูพุดุฑูุชู:

                    Subsurface Scattering (SSS) โ ุจุฑุง ุทุจุนโุชุฑ ฺฉุฑุฏู ูพูุณุช ู ููุงุฏ ูููโุดูุงู
                    Volumetric Lighting โ ููุฑ ุญุฌู ุจุฑุง ููุงุด ูพุฑุชููุง ููุฑ ู ูู
                    Global Illumination (GI) โ ููุฑูพุฑุฏุงุฒ ุณุฑุงุณุฑ ุจุฑุง ูุงูุนโุชุฑ ุดุฏู ุณุงูโูุง
                    Ambient Occlusion (AO) โ ุณุงูโูุง ูุญุท ุจุฑุง ุงูุฒุงุด ุนูู
                    Ray Tracing โ ูุญุงุณุจู ุฏูู ุจุงุฒุชุงุจโูุง ู ุงูฺฉุณุงุฑูุง ููุฑ
                    Caustics โ ุจุงุฒุชุงุจโูุง ููุฑ ุฑู ุขุจ ู ุดุดู
                    โ ุงูฺฉุชโูุง ููุฒ ู ุดุจูโุณุงุฒ ุฏูุฑุจู:

                    Chromatic Aberration โ ุงูุญุฑุงู ุฑูฺฏ ุจุฑุง ุญุณ ุณููุง
                    Depth of Field (DOF) โ ูุญู ฺฉุฑุฏู ูพุณโุฒููู ุจุฑุง ุฌุฏุงุณุงุฒ ุณูฺู
                    Bokeh Shapes โ ุชูุธู ุดฺฉู ุจูฺฉู (ุฏุงุฑูโุงุ ฺูุฏุถูุนุ ุขูุงููุฑูฺฉ)
                    Anamorphic Lens Flare โ ุจุงุฒุชุงุจโูุง ูุฎุตูุต ููุฒูุง ุณููุง
                    Film Grain & Noise โ ุดุจูโุณุงุฒ ููุฒ ููู ุจุฑุง ุญุณ ุทุจุนโุชุฑ
                    Motion Blur โ ุชุงุฑ ุญุฑฺฉุช ุจุฑุง ุญุณ ุณุฑุนุช ู ูพูุง
                    Long Exposure โ ููุฑุฏู ุทููุงู ุจุฑุง ุฌูููโูุง ุฎุงุต ูุซู ุฑุฏ ููุฑ ุฎูุฏุฑู
                    โ ูุฏูโุณุงุฒ ู ูุฒฺฉ ููุฑ:

                    PBR Materials (Physically Based Rendering) โ ูุชุฑุงูโูุง ูุจุชู ุจุฑ ูุฒฺฉ
                    Subpixel Rendering โ ุงูุฒุงุด ุฏูุช ููุงุด ุฌุฒุฆุงุช
                    Light Falloff & Soft Shadows โ ูุญุงุณุจู ุงูุช ููุฑ ู ุณุงูโูุง ูุฑู
                    Exposure Control โ ฺฉูุชุฑู ูุฒุงู ููุฑุฏู ุจุฑุง ุชุฃุซุฑ ุงุญุณุงุณ ุจุดุชุฑ
                    ๐น ุงุชุตุงู ุนูุงุตุฑ ุจู ุญุณ ู ููููู:
                    โ ุฑูฺฏ ู ุงุญุณุงุณ:

                    ุฑูฺฏโูุง ุณุฑุฏ (ุขุจุ ุฎุงฺฉุณุชุฑุ ุจููุด ฺฉูโุฑูฺฏ) โ ุงุญุณุงุณ ุชููุงุ ุชุฑุณุ ุง ุฑูุฒุขููุฏฺฏ
                    ุฑูฺฏโูุง ฺฏุฑู (ูุฑูุฒุ ูุงุฑูุฌุ ุทูุง) โ ุญุณ ุงูุฑฺุ ุฎุดูุ ุง ุตููุช
                    ุฑูฺฏ ุณุจุฒ โ ุขุฑุงูุดุ ุทุจุนุชุ ุง ุญุณ ูุฑุงูุงูุน
                    ุชุถุงุฏ ุดุฏุฏ ุจู ููุฑ ู ุชุงุฑฺฉ โ ุฏูฺฏุงูฺฏ ุฎุฑ ู ุดุฑ
                    ุงุณุชูุงุฏู ุงุฒ ูู ู ููุฑ ฺฉู โ ุญุณ ุฑูุฒุขููุฏ ู ูุจูู
                    โ ุฒุงูู ุฏูุฑุจู ู ุญุณ ุขู:

                    ุฒุงูู ูพุงู (Low Angle) โ ููุงุด ูุฏุฑุช ู ุชุณูุท
                    ุฒุงูู ุจุงูุง (High Angle) โ ููุงุด ุถุนู ู ฺฉูฺฺฉ ุดุฎุตุช
                    ููุง ุจุณุชู (Close-up) โ ุชุฃฺฉุฏ ุจุฑ ุงุญุณุงุณุงุช ู ูุงฺฉูุดโูุง
                    ููุง ูููโุนุฑุถ (Extreme Wide Shot) โ ูุดุงู ุฏุงุฏู ูุงฺุฒ ุจูุฏู ุดุฎุตุช ุฏุฑ ูุญุท
                    โ ููุฑูพุฑุฏุงุฒ ุงุญุณุงุณ:

                    ููุฑ ูุฑู ู ูพุฎุดโุดุฏู โ ุตููุชุ ุขุฑุงูุดุ ุง ุญุณ ุฑูุง
                    ููุฑ ุณุฎุช ุจุง ุณุงูโูุง ุชุฒ โ ุชูุดุ ุชุฑุณุ ุง ุงุณุชุฑุณ
                    ููุฑ ูพุณโุฒููู (Backlight) โ ุญุณ ุฑูุฒุขููุฏ ุง ุฏุฑุงูุงุชฺฉ
                    ููุฑูพุฑุฏุงุฒ ฺฉูโฺฉูุชุฑุงุณุช (Low Contrast Lighting) โ ุญุณ ูุงูุฎููุง ุง ุณุฑุฏุฑฺฏู
                    ๐น ุงุณุชุฑุงุชฺโูุง ฺฉูุชุฑู ุฎุฑูุฌ AI:
                    Gradient-based Attention Weighting โ ฺฉูุชุฑู ุชูุฑฺฉุฒ ูุฏู ุฏุฑ ููุงุญ ุฎุงุต
                    Multi-pass Refinement โ ูพุฑุฏุงุฒุด ฺูุฏ ูุฑุญููโุง ุจุฑุง ุงูุฒุงุด ฺฉูุช
                    Seed Control & Variability Reduction โ ฺฉูุชุฑู ุฎุฑูุฌ ุชุตุงุฏู ุจุฑุง ูุชุงุฌ ูุดุงุจู
                    Latent Space Navigation โ ูุฏุงุช ูุฏู ุฏุฑ ูุถุง ูฺฺฏโูุง ุจุฑุง ุฎุฑูุฌ ุฎุงุตโุชุฑ
                    Negative Prompting โ ุฌููฺฏุฑ ุงุฒ ุชููุฏ ุนูุงุตุฑ ูุงุฎูุงุณุชู
                    ๐น ููุงุฏฺฏุฑุง ุฑูุง ุจุฑุง ุงูุชูุงู ููุงูู ุงูุชุฒุงุน:
                    ุขูู โ ุฎูุฏุดูุงุณุ ุชุถุงุฏ ุฏุฑูู
                    ุณุงูโูุง ฺฉุดุฏู โ ุชูุฏุฏุ ูุงุงูู
                    ุฏุงุฑู ู ุญููู โ ุจโูพุงุงูุ ฺุฑุฎูโูุง ุฒูุงู
                    ุฒูุฌุฑ ู ุทูุงุจ โ ูุญุฏูุฏุชุ ุงุณุงุฑุชุ ุง ุงุฑุชุจุงุท ุนุงุทู
                    ุงูุนฺฉุงุณ ุฏุฑ ุขุจ โ ูุงูุนุช ููุงุฒ ุง ุฏูฺฏุงูฺฏ ุดุฎุตุช
                    ๐น ุจูููโุณุงุฒ ูุงฺฺฏุงู ุจุฑุง ฺฉุงูุด ุงุจูุงู:
                    โ ุงุตุทูุงุญุงุช ุณููุง:

                    35mm f/1.4 Lens โ ุจุฑุง ูพุฑุชุฑูโูุง ุญุฑููโุง
                    14mm f/2.8 Lens โ ุจุฑุง ุซุจุช ฺุดูโุงูุฏุงุฒูุง ุณููุง
                    3200K Warm Light โ ุจุฑุง ููุฑ ุทูุง ู ุตููุงูู
                    5600K Daylight โ ููุฑ ุทุจุน ู ูุชุนุงุฏู
                    โ ุณุจฺฉโูุง ุณููุง:

                    Film Noir โ ุชุงุฑฺฉ ู ุณุงูโูุง ุนูู ุจุฑุง ูุถุง ูุนูุง
                    Cyberpunk โ ููุฑูุง ูุฆูู ุจุง ุชุฑฺฉุจ ุชฺฉููููฺ ู ุฏุณุชููพุง
                    Gothic Horror โ ุงุณุชูุงุฏู ุงุฒ ูุนูุงุฑ ุชุงุฑฺฉ ู ูู ุจุฑุง ุชุฑุณ ู ูุญุดุช
                    ๐น ฺฉูพุงุฑฺูโุณุงุฒ ูุญุฏูุฏุชโูุง ุตุฑุญ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุฑูุฌ ูุงุฎูุงุณุชู:
                    ูุญุฏูุฏ ฺฉุฑุฏู ุฑูฺฏโูุง ุบุฑูุงูุน ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงูฺฉุชโูุง ุนุฌุจ
                    ฺฉูุชุฑู ุจุดุชุฑู ู ฺฉูุชุฑู ูุฒุงู ุฌุฒุฆุงุช ุฏุฑ ุชุตูุฑ
                    ุฌููฺฏุฑ ุงุฒ ุงุนูุฌุงุฌ ุบุฑูุงูุน ุฏุฑ ูพุฑุณูพฺฉุชู ุดุฎุตุชโูุง
                    ๐น ูุงูโุจูุฏ ุณูโุจุนุฏ ูุญุท:
                    ูพุดโุฒููู (Foreground): ุนูุงุตุฑ ูุฒุฏฺฉ ุจู ุฏูุฑุจู ฺฉู ุญุณ ุนูู ูโุฏููุฏ
                    ูุงูโุฒููู (Midground): ุณูฺู ุงุตู ฺฉู ุชูุฑฺฉุฒ ุฑู ุขู ุงุณุช
                    ูพุณโุฒููู (Background): ุงุฌุงุฏ ูุถุง ูุญุท ู ุญุณ ููุงุณ
                    ๐น ุงูุฒูุฏู ุงุตูู ุชุฑฺฉุจโุจูุฏ ุณููุง:
                    โ ุชฺฉูฺฉโูุง ูุงุจโุจูุฏ:

                    Rule of Thirds โ ุชูุณู ูุงุจ ุจู น ูุณูุช ุจุฑุง ุชุนุงุฏู ุจุตุฑ
                    Leading Lines โ ูุฏุงุช ฺุดู ุจููุฏู ุจุง ุฎุทูุท ุฑุงูููุง
                    Golden Ratio โ ุงุณุชูุงุฏู ุงุฒ ูุณุจุช ุทูุง ุจุฑุง ุชุฑฺฉุจโุจูุฏ ุทุจุน
                    Dutch Angle โ ฺฉุฌ ฺฉุฑุฏู ูุงุจ ุจุฑุง ุงุฌุงุฏ ุญุณ ุงุถุทุฑุงุจ
                    โ ุงุณุชูุงุฏู ุงุฒ ูุถุง ููู:

                    Negative Space โ ุญุฐู ุงููุงูโูุง ุบุฑุถุฑูุฑ ุจุฑุง ุชุฃฺฉุฏ ุฑู ุณูฺู
                    โ ุชฺฉูฺฉโูุง ฺฉูุชุฑุงุณุช:

                    High Contrast โ ููุงุด ุฏูฺฏุงูฺฏ ู ุชูุด ุจุงูุง
                    Soft Contrast โ ุงุฌุงุฏ ุญุณ ุฑูุง ู ูุทู
                    ๐น ุงุฌุงุฏ ุญุณ ุญุฑฺฉุช ู ูพูุง ุฏุฑ ุตุญูู:
                    โ ุงูฺฉุชโูุง ุณููุง ุจุฑุง ููุงุด ุญุฑฺฉุช:

                    Motion Blur โ ุชุงุฑ ุญุฑฺฉุช ุจุฑุง ุญุณ ุณุฑุนุช
                    Parallax Scrolling โ ุงุฎุชูุงูโููุธุฑ ุจุฑุง ุนูู ุจุดุชุฑ
                    Dynamic Lighting โ ููุฑูพุฑุฏุงุฒ ูุชุญุฑฺฉ ุจุฑุง ุชุฃุซุฑ ุงุญุณุงุณ
                    โ ุงูฺฉุชโูุง ุฎุงุต ุจุฑุง ุชุฃุซุฑฺฏุฐุงุฑ ุจุดุชุฑ:

                    Long Exposure Photography โ ุซุจุช ุญุฑฺฉุช ููุฑูุง ุฏุฑ ุดุจ
                    Tilt-shift Effect โ ุงุฌุงุฏ ุงูฺฉุช ููุงุชูุฑ
                    Dual-focus Composition โ ุฏู ููุทู ููฺฉูุณ ููุฒูุงู
                    โ ุชฺฉูฺฉโูุง ููุฑูพุฑุฏุงุฒ ุฎุงุต:

                    Underexposure โ ฺฉูโููุฑุฏู ุจุฑุง ุญุณ ุฑุงุฒุขููุฏ
                    Overexposure โ ููุฑ ุจุด ุงุฒ ุญุฏ ุจุฑุง ุงุฌุงุฏ ุญุณ ุงุณุชุฑุณ ุง ุณุฑฺฏุฌู
                    ๐น ุงุณุชูุงุฏู ุงุฒ ุจุงูุชโูุง ู ูุฒฺฉ ููุฑ ุจุฑุง ุนูู ุจุดุชุฑ:
                    Microdetail Mapping โ ุงุถุงูู ฺฉุฑุฏู ุจุงูุชโูุง ุจุณุงุฑ ุฑุฒ
                    Ray-traced Shadows โ ุณุงูโูุง ูุงูุนโฺฏุฑุงุงูู ู ุฏูู
                    Soft Diffusion Glow โ ููุฑูุง ููุงู ุจุฑุง ุญุณ ูุงูุชุฒ

                        ]
                        ุฎู ููู : ุงูู ุนููุงู ูพุฑุงูุช ุฑู ุฏุฑฺฉ ฺฉู ู ุฎูุงุณุชู ูพุฑุงูุช ุจููู ู ุจุนุฏ ุงุฒ ุชฺฉูฺฉ ูุง ุจุงูุง ูุชูุงุณุจ ุจุง ุฎูุงุณุชู ู ุฏุฑ ุตูุฑุช ูุงุฒ ุงุณุชูุงุฏู ฺฉู
                                   ูฺฉุชู ููู : ุดุฑุงุท ุชุนุฑู ุดุฏู ุฏุฑ ูพุฑุงูุช ุจุฑ ูุฑ ฺุฒ ุงููุช ุฏุงุฑู ู ูุจุงุฏ ุชูุตูุช ุจุง ุดุฑุงุท ุชุนุฑู ุดุฏู ุฏุฑ ุชุถุงุฏ ุจุงุดู
                                   ุฑู ุจุง ุชูุฌู ุจู ูพุฑุงูุช ูพุฑ ฺฉู ูฺฉุชู : ุฎูุฏุช negative_prompt 
                                   ุจุงุฏ ุจุฑุง ูพุฑ ฺฉุฑุฏูุด ูุชูุงูุถ ูพุฑุงูุช ุฑู ุจฺฏ ู ููฺูู ุฑู ูฺฺฏ ูุง ุงุดุชุจุงู ฺฉู ฺฉ ุชุตูุฑ ูโุชูุงูุฏ ุฏุงุดุชู ุจุงุดุฏ ุชูุตู ฺฉู
                                   ุณุงุฎุชุงุฑ ุฌุณูู ฺฉู ุจุงุฏ ุจู ูู ุจุฏ :
                                   {base_json}
                                   ุชูุฌู : ููุท ู ููุท ู ููุท ุฏููุง ูุซู ุฌุณูู ุจุงูุง ุฑู ุฏุฑ ููุงุช ุจูู ุจุฏู ู ูุงุฒ ุจู ูฺ ุชูุถุญ ูุฏุงุฑู ู ุฏูุช ฺฉู ุณุงุฎุชุงุฑ ุฌุณูู ุจุง ูุงุตูู ุฎุฑุงุจ ูฺฉู ุฏููุง ุฌุณูู ุฎุฑูุฌ ุฑู ุจุง ูุฑูุช ุฌุณูู ุตุญุญ ูุงุฒ ุฏุงุฑู ู ุงุจุนุงุฏ ูู ูุถุฑุจ ุงุฒ 16 ุจุงุดู ููุท
                                   ุงุฒ ุงุจุนุงุฏ ฺฉุงููุง ุงุณุชุงูุฏุงุฑุฏ ุงุณุชูุงุฏู ฺฉู
                                   ูฺฉุชู : ุชู ูุชู ูพุฑุงูุช ุชู ุฌุณูู ุงุตูุง ูุฑู ุฎุท ุจุนุฏ ู ูุชู ฺฉูพุงุฑฺู ู ุจุฏูู ูฺ ูุงุตูู ุง ุจุงุดู
                                   ููู ุชุฑู ูฺฉุชู ฺฉู ฺฉุงูู ุจุงุฏ ุฏูุช ฺฉู:
                                   ุจู ูฺ ุนููุงู ุชู ูุชู ูพุฑุงูุชุช ูุจุงุฏ ูุงุตูู ุฑูุชู ุจู ุฎุท ุจุนุฏ ุจุงุดู ฺูู ุณุงุฎุชุงุฑ ุฌุณูู ุฎุฑุงุจ ูุดู
                                   ูฺฉุชู ุขุฎุฑ : ุฌุณูู ุฑู ุจู ุตูุฑุช ูุชู ุฎุงู ุจุฏู ู ูุงุฒ ุจู ูุฑุณุชุงุฏู ุฏุฑ ูุงูุจ ุฌุณูู ูุณุช
                                   ุนู ุจู ูฺ ุนููุงู ูุจุงุฏ [```json] ุงูุฌูุฑ ุจูุฑุณุช
                                   ุฏุณุชูุฑ ููุง : ฺฉ ุขุฑุงู ุจู ุชุนุฏุงุฏ ุชุตุงูุฑ ุฏุฑุฎูุงุณุช ฺฉุงุฑุจุฑ ฺฉู ุชู ูุชู ูพุฑุงูุช ฺฏูุชู ุดุฏู ุงุฒ ุฌุณูู ุจุณุงุฒ ู ุงฺฏู ูฺฏูุชู ุจูุฏ ุชู ูพุฑุงูุช 6 ุชุง ุฏุฑ ูุธุฑ ุจฺฏุฑ ู ุฏูุช ฺฉู ุญุชูุง ุชุนุฏุงุฏ ุฑู ุงุฒ ูุชู ูพุฑุงูุช ูพุฏุง ฺฉู ู ุงฺฏู ุจุดุชุฑ ุงุฒ 10 ฺฏูุชู ุดุฏู ุจูุฏ ุชู 10 ุชุง ุจุณุงุฒ
                                   ุงฺฏู ฺฉุงุฑุจุฑ ุดุฑุงุท ูุฑ ุชุตูุฑ ุฑู ุชูุตู ฺฉุฑุฏู ุจูุฏ ุ ูพุฑุงูุช ฺฉู ูโุณุงุฒ ุจุงุฏ ุจุง ุดุฑุงุท ุชูุตู ุจุฑุง ูุฑ ุนฺฉุณ ุฏูู ุจุงุดุฏ ู ูุฑ ูพุฑุงูุช ุฑู ุจุง ูพุฑุงูุช ุณุงุฑ ุชุตุงูุฑ ุชุฑฺฉุจ ูฺฉู ู ุจุฑุง ูุฑ ุนฺฉุณ ูพุฑุงูุช ููฺฉ ุฎูุฏุด ุงุฌุงุฏ ฺฉู
                                   ุชุนุฏุงุฏ ุชุตุงูุฑ ุฑู ุชู ูพุฑุงูุช ูุง ุฏุฎู ูฺฉู ู ูุฑ ูพุฑุงูุช ุจุงุฏ ุฑู ุณูฺู ููฺฉ ุฎูุฏุด ุชูุฑฺฉุฒ ุฏุงุดุชู ุจุงุดุฏ
                                   ูฺฉุชู ุฎู ููู : ูฺ ููุช ุทูู ุขุฑุงู ุจุดุชุฑ ุงุฒ 10 ูุจุงุฏ ุจุดู ู ุญุฏุงฺฉุซุฑ 10 ุชุง ุจุงุดู
                                   ูฺฉุชู : ููุฏุงุฑ ูพุฑุงูุช ุชู ูฺ ุขุชู ุงุฒ ุขุฑุงู ูุจุงุฏ ุจุง ููุฏุงุฑ ูพุฑุงูุช ุณุงุฑ ุขุฑุงู ูุง ุจุฑุงุจุฑ ุจุงุดู ู ุจุงุฏ ุจุฑุง ูุฑ ุขุชู ุงุฒ ุขุฑุงู ฺฉ ูพุฑุงูุช ููฺฉ ุจุณุงุฒ
                                   ุญุงู ุขุฑุงู ุฑู ุฏุงุฎู ุฌุณูู ุฒุฑ ูุฑุงุฑ ุจุฏู:
                                   {base_json2}
                                   ููุฏุงุฑ ฺฉูพุดู ุฑู ุจุง ู ุชูุถุญ ฺฉุงูู ู ุชูุตู ุชุตุงูุฑ ฺฉู ุณุงุฎุช ุจู ุฒุจุงู ูุงุฑุณ ูพุฑ ฺฉู 
                                   ูุชูู ุจุง ฺฉุงุฑุจุฑ ูพุดููุงุฏ ุจุฏ ุชู ูพุฑุงูุช ุจุนุฏุด ุงุฒุช ฺ ุจุฎูุงุฏ
                                   ูุชูู ุงุฒ ฺฉุงุฑุจุฑ ุจุฎุงุทุฑ ุตููุด ุชุนุฑู ฺฉู
                                   ูุชูู ู ูพุฑุงูุช ูุดุงุจู ูพุฑุงูุช ฺฉุงุฑุจุฑ ูู ุจู ุตูุฑุช ุจูุจูุฏ ุงูุชู ุจู ฺฉุงุฑุจุฑ ูพุดููุงุฏ ุจุฏ ุจุฑุง ุฒุจุงุชุฑ ุดุฏู ุชุตุงูุฑุด ู ูพุดููุงุฏุช ูุงุฑุณ ุจุงุดู
                                   ูุชูู ุงููุงุน ูุฎุชูู ูพุฑุงูุช ุ ูุดุงุจู ูพุฑุงูุช ฺฉุงุฑุจุฑ ุ ุจูุด ูพููุงุฏ ุจุฏ ูู ูพุดููุงุฏุงุชุช ุจุงุฏ ฺฉุงููุง ูุงุฑุณ ุจุงุดู
                                   ูุชูู ุง ุดูุงุฎุช ุตููู ฺฉุงุฑุจุฑ ฺฉ ูพุฑุงูุช ูุชูุงูุช ุงุฒ ูพุฑุงูุช ูุนู ฺฉุงุฑุจุฑ ูพุดููุงุฏ ุจุฏ ู ุจุฎูุง ฺฉู ุงูู ูู ุงูุชุญุงู ฺฉูู
                                   ูุชูู ุงุฑุงุฏุงุช ูพุฑุงูุช ฺฉุงุฑุจุฑ ุฑู ุจูุด ุจฺฏ ู ุฑุงูููุงุด ฺฉู ฺุฌูุฑ ูพุฑุงูุช ุจูุชุฑ ุจููุณุฏ ู ุชฺฉูฺฉ ูุง ูพุฑุงูุช ููุณ ุงุฏุด ุจุฏ
                                   ุจุงุฏ ฺฉุงุฑุจุฑ ุจู ููู ูุฑ ุจุฎุด ุงุฒ ูุชู ุฏุงุฑ ุชูุตู ูโฺฉู ูพุดููุงุฏ ูุฏ ู ุง ุชุนุฑู ูโฺฉู ูพุณ ุจุงุฏ ูุชู ฺฏูุง ู ูุงุถุญ ู ุจุฏูู ุงุจูุงู ุจุงุดู
                                   ูุชูู ุงุฒ ุงููุฌโูุง ููุงุณุจ ุจุง ููุถูุน ูพุฑุงูุช ุจุฑุง ุฒุจุงุณุงุฒ ุงุณุชูุงุฏู ฺฉู
                                   ุชุง ุฌุง ููฺฉู ุงุฒ ุงููุฌโูุง ุจุฑุง ููุชูู ฺฉุฑุฏู ุญุณ ุฎูุจ ุจู ฺฉุงุฑุจุฑ ุจูุฑู ุจฺฏุฑ
           ุฏุณุชูุฑ : ููููุนุช ูุง ฺฉู ุชุนุฑู ุดุฏู ุฑู ฺฉุงูู ุชุญูู ฺฉู ู ูฺฉุงุช ุชูุงู ูุญุฏูุฏุช ูุง ูพุฏุง ู ุจุง ูพุฑุงูุช ุดูุงุฑู 1 ู ูพุฑุงูุช ูุง ุชููุฏ ุฎูุฏุช ุจุฑุณ ฺฉู
            ููู : ุฑุฒ ุจู ุฑุฒ ูุชู ูพุฑุงูุช ุดูุงุฑู 1 ุจุฑุง ุจุฑุณ ูุณุช ููููุนุช ูุง ุฐฺฉุฑ ุดุฏู ูุง ุฒุฑ ูุธุฑ ุจฺฏุฑ ู ุงุฒ ูุฑ ูุธุฑ ฺฉุงูู ุจุฑุณ ฺฉู ุดุงูู ููููุนุช ูุจุงุดู
    ููู : ุฏุฑ ููููุนุช ูุง ููุฑุฏ 6 ุจุณุงุฑ ุจุงุฏ ุจุง ุฏูุช ุจุฑุณ ุดูุฏ ุชุง ุงู ููููุนุช ูุง ุชุนุฑู ุดุฏู ุฏูุฑ ุฒุฏู ูุดูุฏ ุญุช ุจุง ุจุงุฒููุณ ูพุฑุงูุช ุชูุณุท ุฎูุฏุช 
            ุงฺฏู ุญุช ฺฉููู ุง ุดุงูู ููููุนุช ุจูุฏ ุญู ูุฏุงุฑ ูุงุณุด ูพุฑุงูุช ุฏุฑุณุช ฺฉู ู ุจุงุฏ ุจู ฺฉุงุฑุจุฑ ูุดุฏุงุฑ ุจุฏ
            ุฏุณุชูุฑ ุงฺฏู ูพุฑุงูุช ุดุงูู ููููุนุช ูุง ุจูุฏ ฺฺฉุงุฑ ฺฉู:
            1- ููุฏุงุฑ Prohibition ุฑู ุจุฑุงุจุฑ true ูุฑุงุฑ ุจุฏู
             2- ููุฏุงุฑ prompts ุจุงุฏ ุจุฑุงุจุฑ ฺฉ ูุณุช ุฎุงู ุจุงุดู ุญุชูุง ุญุชูุง ุนู []
            3- ุจู ฺฉุงุฑุจุฑ ุชู caption ุจฺฏู ูพุฑุงูุชุด ุดุงูู ฺู ููููุนุช ูุง ูุณุช ู ุจูุด ูุดุฏุงุฑ ุจุฏู ุฏฺฏู ุชฺฉุฑุงุฑ ูฺฉูู ูฺฏุฑูู ุงุฒ ุฑุจุงุช ูุณุฏูุฏ ู ุงุฒ ฺฉุงูุงู ุญุฐู ูุดู
 ุจุฑุณ ฺฉู ุงฺฏู ฺฉุงุฑุจุฑ ุงุณู ูุญูุฏ ุฌูุงุฏ ูุฎุชุงุฑ ูุจุงุฑฺฉู ุง ุจุฎุด ุงุฒ ุขู ุขูุฑุฏู ุจูุฏ ู ุฎูุงุณุชู ุจูุฏ ุนฺฉุณ ุฑู ุจุณุงุฒ ุฏุฑ ุฌูุงุจ ุจฺฏ ุฑฺฉุจ ุฎูุฑุฏ ููุฏ ู ุงฺฏู ุงุณู ุณุงุฒูุฏูู ุจุงุฑ ูู ููุงููู ุฑุนุงุช ูฺฉูู ุฎุฎุฎุฎุฎุฎ ู ฺุฒ ูุง ูุงุดุจู ุจฺฏู        
            ูพุฑุงูุช ฺฉุงุฑุจุฑ ุฑู ุงุตูุงุญ ููุงุฑุฏ ููููุนุด ุญุฐู ู ุจู ฺฉุงุฑุจุฑ ูพุดููุงุฏ ุจุฏู ู ุชุดููุด ฺฉู ุงู ูพุฑุงูุช ุจูุฑุณุชู
            ุจู ฺฉุงุฑุจุฑ ุจฺฏู ุงุฒ ุฎุฏุง ุฎุฌุงูุช ุจฺฉุด ุฒุดุชู ู ูฺฉู ุงู ฺฉุงุฑู
            ุจู ฺฉุงุฑุจุฑ ุจฺฏู ุฏููุง ฺฉุฌุง ูพุฑุงูุชุด ุงุฑุงุฏ ุฏุงุฑู ู ฺุฌูุฑ ุงุฑุงุฏุด ุจุฑุทุฑู ฺฉูู ุชุง ุชุตูุฑ ุณุงุฎุชู ุจุดู
            ูฺฉุชู : ุงฺฏุฑ ูพุฑุงูุช ุดูุงุฑู 1 ฺฉุงุฑุจุฑ ุดุงูู ููฺฉ ุง ููุงุฑุฏ ุชุจูุบุงุช ูุงููุฏ ุฏุฑุฎูุงุณุช ููฺฏู ุจุฑุง ุงุณู ฺูู ุจูุฏ ููุฏุงุฑ Advertising ุฑู ุจุฑุงุจุฑ true ูุฑุงุฑ ุจุฏู
                                   """

    # ุณุงุฎุช ูพฺฉุฑู ุฏุฑุฎูุงุณุช ุจุฑุง ฺฏูฺฏู
    payload = import json
import aiohttp
from flask import jsonify
from .fix_json import fix_and_parse_json
import os
from dotenv import load_dotenv


load_dotenv()
GEMINI_ENDPOINT = os.getenv("GEMINI_ENDPOINT")


async def check(user_text):
    base_dict = {'text': user_text}  # ุชุจุฏู ูุณุชูู ุจู ุฏฺฉุดูุฑ
    text_output = json.dumps(base_dict, ensure_ascii=False, indent=4)  # ุชุจุฏู ุจู JSO
    qavanin = """
           ููููุนุช ูุง:
        [
           ุชุตุงูุฑ ุจุฑููฺฏ
           ูพูุฑููฺฏุฑุงู
               ุดุฎุตุช ูุง ุณุงุณ ู ุฑูุญุงู ุงุฑุงู
               ุดุฎุตุช ุขูุง ุฎุงููู ุง
               ุดุฎุตุช ุขูุง ุฎูู
               ุดุฎุตุช ูุง ุจุงุฒฺฏุฑ ุงุฑุงู
               ]
                       """

    base_json2 = """
            {
                "review":0,
               "Suggestions": [],
               "nudity" : false,
               "Advertising" : false,
               "caption": ""
           }
           """
    # noinspection SpellCheckingInspection
    PR = f""" ุฌุณูู ุฒุฑ ุฑุง ฺฉุงูู ฺฉู:
                       {base_json2}
                            ุฏุณุชูุฑ ฺุฌูุฑ ูพุดููุงุฏ ุฏุงุฏู ุจู ฺฉุงุฑุจุฑ :
                                                          ูโุชูู ุชุง ุฌุง ููฺฉู ุจู ูุณุจุช ูพุฑุงูุช ุดุฑุงุท ูุญุท ุชุตูุฑ ุฎูุงุณุชู ุดุฏู ุชูุตู ฺฉู ู ุฎูุฏุช ุฑู ุฏุฑ ุดุฑุงุท ูพุฑุงูุช ุจุฒุงุฑ ู ฺฉุงูู ุชูุตู ฺฉู ุจุง ุชูุงู ุชฺฉูฺฉ ูุง ุทุฑุงุญ
                                                          ูุชูู ูพุฑุงูุช ุฑู ุฒุจุง ุณุงุฒ ฺฉู ู ุงุฒ ุงููุงุน ุดุฑุงุท ุจุฑุง ุฒุจุงุชุฑ ุดุฏู ุจูุฑู ุจฺฏุฑ
                                                          ูุชูู ูุชูุงุณุจ ุจุง ููุถูุน ูพุฑุงูุช ูุถุง ุณุงุฒ ุญุฑูู ุง ุงูุฌุงู ุจุฏ
                                                          ูุชูู ูุชูุงุณุจ ุจุง ููุถูุน ูพุฑุงูุช ุจุงูุช ุชูุตู ฺฉู ู ุจู ุชูุตู ุฌุฒุฆุงุช ุจุณุงุฑ ุฏูุช ฺฉู
                                                          ูุชูู ุญุงูุช ูฺฏุงู ุณูฺู ู ฺฉุงุฑุงฺฉุชุฑ ูุง ู ุฒุงูู ุฏูุฑุจู ุฑู ุชู ุจูุชุฑู ุญุงูุช ุชูุตู ฺฉู
                                                          ูุชูู ูพุฑุงูุช ุจุฑุง ูพุฑุงูุช ุดุฑุงุท ููุฑ ูพุฑุฏุงุฒ ุญุฑูู ุง ุชูุตู ฺฉู
                                                          ูุชูู ุจุฑุง ูพุฑุงูุชู ฺุณุช ูุง ู ุญุงูุงุช ุจุฑุง ุงููุง ุญุณ ูุงูุน ูพุฑุงูุช ุชูุตู ฺฉู
                                                          ูุชูู ุงุฒ ุฒุงูู ูุง ูุชูุงูุช ุจู ูพุฑุงูุช ูฺฏุงู ฺฉู
                                                          ูุชูู ููฺฉูุณ ูพุฑุงูุช ุฑู ุฑู ุณูฺู ุงุตู ุจุฒุงุฑ
                                                          ูุชูู ุจูุชุฑู ุฑูฺฏ ุจูุฏ ุจุฑุง ุงุฌุฒุง ูพุฑุงูุช ุงูุชุฎุงุจ ฺฉู
                                                          ูุชูู ุงุฒ ุฑูฺฏ ูุง ูฺฉูู ุญุฑูู ุง ุงุณุชูุงุฏู ฺฉู
                                                          ูุชูู ุจูุชุฑู ูฺฉุงู ูุงุฑู ุจุฑุง ูพุฑุงูุช ุจุงุฒฺฏู ฺฉู
                       ูฺฉุชู: ุงฺฏู ุฏุฑูู  ููุงุฑุฏ ุชุจูุบุงุช ูุงููุฏ ููฺฉ ุง ุขุฏ ุง ุฏุฑุฎูุงุณุช ููฺฏู ุจุฑุง ุงุณู ฺูู ุจูุฏ ููุฏุงุฑ Advertising ุฑุง true  ุจุฏู
                        ูฺฉุชู: ุจุง ุชูุฌู ุจู text ฺฉู ุฏุฑุฎูุงุณุช ฺฉุงุฑุจุฑ ุจุฑุง ุณุงุฎุช ฺฉ ุนฺฉุณ ุงุณุช ุชูุงู ุนูุงูู ูุฑุชุจุท ุจู text ฺฉุงุฑุจุฑ ุฑู ุชู prompts ุจู ุตูุฑุช ุขุฑุงู ูพุดููุงุฏ ุจุฏู
                        ุจุฑุง ูุซุงู ุงฺฏู text ุจุฑุงุจุฑ ุงุฑุงู ุจูุฏ ุจุงุฏ ุจุฑุง Suggestions ุตูุงุน ุฏุณุช ู ุณูุบุงุช ู ูููุช ูุง ู ูฺฉุงู ูุง ฺฏุฑุฏุดฺฏุฑ ู ูุฑ ฺุฒ ฺฉู ุจุชูุงู ุจุง ุขู ฺฉ ุนฺฉุณ ุฒุจุง ู ูุฑุชุจุท ุฎูู ฺฉุฑุฏ ูพุดููุงุฏ ุฏู
                       ูฺฉุชู: ูพุดููุงุฏุงุช ุจุงุฏ ุจุณุงุฑ ุฏูู ู ุฎูุงูุงูู ุจุงุดุฏ ูุงููุฏ ฺฏุฑุจู ูพุฑุดู ู ุงูุงุฑ ู ุฒุนูุฑุงู ู ูุจุงุณ ูุญู ุจุฑุง ุงุฑุงู
                       ูฺฉุชู: ูพุดููุงุฏุงุช ุจุงุฏ ุจุดุชุฑู ูุฒุฏฺฉ ุจู ูุงูุนุช ูุนู ุฏุงุดุชู ุจุงุดุฏ ูุงููุฏ ุฌูฺฏ ู ฺฉูุฏฺฉุงู ูุธููู ู ุจฺฏูุงู ู ฺฉุจูุชุฑุงู ุฏุฑุญุงู ูพุฑูุงุฒ ู ุฎุฑุงุจู ูุง ุจุฑุง ุบุฒู
                       ูฺฉุชู: ูพุดููุงุฏุงุช ุจุงุฏ ุงุญุณุงุณุงุช ฺฉุงูู ููุชูู ฺฉูุฏ ูุซูุง ุธูู ู ุฌูุงุช ู ุฎูู ุฑุฒ ู ุขุฏู ฺฉุด ุจุฑุง ุงุณุฑุงุฆู
                       ูฺฉุชู: ุจุงุฏ ุนูุงูู ฺฉู ุจุง text ุจุดุชุฑ ุดูุงุฎุชู ุดุฏู ุจุดุชุฑ ุฏุฑ ูุธุฑ ุจฺฏุฑ ูุงููุฏ ุดุฑ ู ุฒุฑุงูู ุจุฑุง ุขูุฑูุง
                       ูฺฉุชู: ุจุงุฏ ุขุฏูุง ูุงุณุฏ ุฑู ุชุง ุฌุง ููฺฉู ุจุฏ ุฌููู ุจุฏ ูุงููุฏ ุฎูู ุฑุฒ ุจุฑุง text ูุง ูุงููุฏ ูุชุงูุงูู ู ุชุฑุงููพ
                       ูฺฉุชู: ูพุจุดููุงุฏุงุช ุจุงุฏ ุชุง ุฌุง ููฺฉู ุดุจู ุจู text ุจุงุดู ู ุฏุฑุฎูุงุณุช ฺฉุงุฑุจุฑ ุฑู ฺฉุงููุง ูุดูู ุจุฏู ุจุฏูู ฺฉู ู ฺฉุงุณุช
                       ูฺฉุชู: ุจุงุฏ ุชูุงู ุตุญูู ูุง ฺฉู ูุชูุงู ุฎูู ฺฉุฑุฏ ุฏุฑ ูุธุฑ ุจฺฏุฑ ูุงููุฏ ุจุงุฒ ฺฉ ุณฺฏ ุฏุฑ ุฏุดุช ุจุฑุง ุณฺฏ ุง ุจฺู ูู ุฏุฑ ุญุงู ฺฉู ุจุง ุฎุฑุทูู ุฎูุฏ ุฏู ูุงุฏุฑ ุฑุง ฺฏุฑูุชู ุจุฑุง ูู ู ุจุชูุงู ุจุฑุง ูุฑ ุนุจุงุฑุช ุฏุงุฑุง ูุนู ฺฉ ุตุญูู ุฒุจุง ู ุชุงุซุฑ ฺฏุฐุงุฑ ูพุดููุงุฏ ุฏู
                        ูฺฉุชู: ุจุงุฏ ุงุฒ ูพุดููุงุฏ ูุง ุตุฑุญ ู ุดูุงู ุงุณุชูุงุฏู ฺฉู ูุงููุฏ ฺฉ ุดุฑ ุฏุฑ ุทุจุนุช ูุญุด ู ุชูุงู ุฌุฒุฆุงุช ุนฺฉุณ ฺฉู ูุชูุงู ุชููุฏ ฺฉุฑุฏ ุดุฑุญ ุฏู
                        ูฺฉุชู: ุงุณุชูุงุฏู ุงุฒ ุณุจฺฉ ูุง ููุงุด ู ุฑูฺฏ ู ุฑูุบู ู 2 ุจุนุฏ ููููุน ุงุณุช ู ุจุงุฏ ุณุจฺฉ ูุง ูุงูุชุฒ ูุงูุน ูุงูุน ฺฏุฑุงุงูู ู 3 ุจุนุฏ ู ุชุฑฺฉุจ ุงู ูุง ุงุณุชูุงุฏู ฺฉู ุจุฑุง ุฒุจุง

                                                      ุฏุณุชูุฑ ูุณุชูู:
                                                                       ุงฺฏู ูุชู text  ุดุงูู ููููุนุช ูุง ุจูุฏ ฺฉุงุฑุง ุฒุฑ ุฑู ุงูุฌุงู ุจุฏู:
                                    ูฺฉุชู ุฎู ููู: ููุท ู ููุท ููุฏุงุฑ text ุงุฒ ุฌุณูู ุดูุงุฑู 1ุงููู ูุงุฒ ุจู ุจุฑุณ ุฏุงุฑุฏ 
                                     ุฏุณุชูุฑ : ูุญุชูุง Suggestions ูุตูู ุงุฒ ุจุฑุณ ุดุฏู ูุณุชู
                                   ุงฺฏู ูุชู text ุดุงูู ููููุนุช ูุง ุจูุฏ ููุฏุงุฑ nudity ุฑู ุจุฑุงุจุฑ true ูุฑุงุฑ ุจุฏู
                                    2- ููุฏุงุฑ Suggestions ุจุงุฏ ุจุฑุงุจุฑ '[]' ุนู ฺฉ ูุณุช ุฎุงู ุจุงุดู ุญุชูุง
                                   3- ุจู ฺฉุงุฑุจุฑ ุชู caption ุจฺฏู ูพุฑุงูุชุด ุดุงูู ฺู ููููุนุช ูุง ูุณุช ู ุจูุด ูุดุฏุงุฑ ุจุฏู ุฏฺฏู ุชฺฉุฑุงุฑ ูฺฉูู ูฺฏุฑูู ุงุฒ ุฑุจุงุช ูุณุฏูุฏ ู ุงุฒ ฺฉุงูุงู ุญุฐู ูุดู
                                  4- ููุฏุงุฑ review ุฑู ุจฺฏู ุจุง ฺู ุญุณุงุณุช ุงู ููููุนุช ุดูุงุณุง ุดุฏู ูุซูุง ุงฺฏู ูุงุถุญ ฺฉุงุฑุจุฑ ุงุดุงุฑู ูุณุชูู ฺฉุฑุฏู ุจุงุดู ููุฏุงุฑุด ุจุงุฏ 100 ุจุงุดู ู ุงฺฏู ูุฌ ููููุนุช ูุฌูุฏ ูุฏุงุดุชู ุจุงุดู ููุฏุงุฑุด 0 ู ุณุงุฑ ููุงุฑุฏ ุจุงุฏ ุจู ุฏุฑุตุฏ ุจฺฏ
                                   ูพุฑุงูุช ฺฉุงุฑุจุฑ ุฑู ุงุตูุงุญ ููุงุฑุฏ ููููุนุด ุญุฐู ู ุจู ฺฉุงุฑุจุฑ ูพุดููุงุฏ ุจุฏู ู ุชุดููุด ฺฉู ุงู ูพุฑุงูุช ุจูุฑุณุชู
                                   ุจู ฺฉุงุฑุจุฑ ุจุงุฏ ุจฺฏ ุฏููุง ฺฉุฌุง ูพุฑุงูุชุด ุงุฑุงุฏ ุฏุงุฑู ู ฺุฌูุฑ ุงุฑุงุฏุด ุจุฑุทุฑู ฺฉูู ุชุง ุชุตูุฑ ุณุงุฎุชู ุจุดู
                                   ฺูุฏ ูพุฑุงูุช ุจุฏูู ุงุฑุงุฏ ุงุฒ ูพุฑุงูุช ฺฉุงุฑุจุฑ ุจุณุงุฒ ู ุจฺฏู
                                  ุจุง ูุญู ุชูุณุฎุฑ ุขูุฒ ู ุฏูุณุชุงูู ุจุง ฺฉุงุฑุจุฑ ุญุฑู ุจุฒู ู ูุซูุง ุจุง ุจุงุฒ ุจู ฺฉุงุฑุจุฑ ุจฺฏู ุตุจ ฺฉู ุงูุง ุนฺฉุณ ูุงุฑู ููุฑุณุชู ุ ุจุนุฏ ฺูุฏ ุฎุท ูพุงู ุชุฑ ุจฺฏู ุดูุฎ ฺฉุฑุฏู ุนุงูู ุงู ูพุฑุงูุชุช ุงู ูุดฺฉูุงุช ุฏุงุฑู
                                  ุดูุฎ ูุงุช ูุงููุฏ ุจุงุฒ ู ุฏุณุช ุงูุฏุงุฎุชู ู ุชูุงุด ฺฉุงุฑุจุฑ ุจุฑุง ุฏูุฑ ุฒุฏู ุณุณุชู ุฑู ุจู ุณุฎุฑู ุจฺฏุฑู ู ูุงูููุฏ ฺฉู ุฏุงุฑ ฺฏูู ูุฎูุฑ
                                  ุจู ฺฉุงุฑุจุฑ ุจฺฏ ฺุฑุง ูุจุงุฏ ุงูุฌูุฑ ูุญุชูุง ูุง ุจุฎูุงู ู ุงุดฺฉุงูุด ฺู
                                                      """

    payload = {
        "contents": [
            {
                "role": "user",
                "parts": [
                    {
                        "text": "Make the outputs in JSON format."
                    } ,
                    {
                        "text": qavanin
                    },
                    {
                        "text": PR
                    }
                ]
            },
            {"role": "user",
            "parts": [{"text": text_output}]
        }]
    }

    async with aiohttp.ClientSession() as session:
        async with session.post(GEMINI_ENDPOINT, json=payload) as response:
            response.raise_for_status()
            gemini_response = await response.json()
            generated_text = gemini_response['candidates'][0]['content']['parts'][0]['text']
            prompts_bais = fix_and_parse_json(generated_text)
            return prompts_bais



    try:
        # ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจู API ฺฏูฺฏู
        response = requests.post(GEMINI_ENDPOINT, json=payload)
        print(response.text)
        response.raise_for_status()

        # ูพุฑุฏุงุฒุด ูพุงุณุฎ
        gemini_response = response.json()
        generated_text = gemini_response['candidates'][0]['content']['parts'][0]['text']

        # ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน fix_and_parse_json ุจุฑุง ูพุงฺฉุณุงุฒ ู ุชุจุฏู ูุชู ุจู ุฏฺฉุดูุฑ
        generated_js = fix_and_parse_json(generated_text)

        # ุงุฑุณุงู ุจู ูุฑูุช JSON
        return jsonify(generated_js)

    except Exception as e:
        return jsonify({'error': str(e)}), 500


if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=8283)
